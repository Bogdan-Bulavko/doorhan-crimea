# Генератор метатегов для товаров

Система автоматической генерации SEO-оптимизированных метатегов для товаров с учетом региональных поддоменов.

## Возможности

1. **Автоматическая генерация Title и Description** по шаблонам
2. **Региональная адаптация** - учитывает поддомен (Симферополь, Ялта, Алушта, Севастополь)
3. **Умное склонение** названий товаров и городов
4. **Автоматическое определение минимальной цены** из вариантов товара
5. **SEO-оптимизация** - валидация длины и оптимизация метатегов

## Шаблоны

### Title
```
[Название товара] - купить в [название города в дательном падеже] | [Название компании]
```

**Пример:**
```
Рольставни витринные (взломоустойчивые) из стального профиля RHS52 - купить в Симферополе | DoorHan Крым
```

### Description (с ценой)
```
Закажите [название товара в винительном падеже, с маленькой буквы] производителя DoorHan. Цена: [минимальная цена] руб. Доставим по [топоним в дательном падеже] и Крыму. Установим, настроим!
```

**Пример:**
```
Закажите рольставни витринные взломоустойчивые из стального профиля RHS52 производителя DoorHan. Цена: 1000 руб. Доставим по Симферополю и Крыму. Установим, настроим!
```

### Description (без цены)
```
Предлагаем заказать [название товара в винительном падеже, с маленькой буквы] от DoorHan по заводской цене. Доставим по [топоним в дательном падеже] и Крыму. Установим, настроим!
```

**Пример:**
```
Предлагаем заказать ферму выносную серий FEH, FET от DoorHan по заводской цене. Доставим по Симферополю и Крыму. Установим, настроим!
```

## Использование

```typescript
import { generateProductMetadata, getRegionFromHeaders } from '@/lib/metadata-generator';
import { headers } from 'next/headers';

// В generateMetadata функции
const headersList = await headers();
const region = getRegionFromHeaders(headersList);

const metadata = generateProductMetadata(
  product.name,
  product.price ? Number(product.price) : null,
  region,
  'DoorHan Крым',
  product.currency || 'RUB'
);

// metadata.title и metadata.description готовы к использованию
```

## Улучшения

### 1. Кэширование результатов склонения
Результаты склонения названий товаров кэшируются для повышения производительности.

### 2. Валидация длины метатегов
- Title: максимум 60 символов (рекомендуется 50-60)
- Description: минимум 120, максимум 160 символов (рекомендуется 150-160)
- Автоматическая обрезка с сохранением смысла

### 3. Автоматическое определение минимальной цены
Если у товара есть варианты с разными ценами, система автоматически выберет минимальную цену для отображения в метатегах.

### 4. Поддержка множественного числа
Система корректно обрабатывает названия товаров во множественном числе.

## Регионы

Поддерживаемые регионы:
- `default` - Крым (по умолчанию)
- `simferopol` - Симферополь
- `yalta` - Ялта
- `alushta` - Алушта
- `sevastopol` - Севастополь

## Приоритет метатегов

1. Если в товаре заданы `seoTitle` и `seoDescription` - используются они
2. Иначе - генерируются автоматически по шаблонам

Это позволяет администраторам переопределять автоматически сгенерированные метатеги при необходимости.

